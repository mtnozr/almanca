// Translations for TR/DE multilingual interface
const TRANSLATIONS = {
    tr: {
        // App Title
        appTitle: "Almanca-Türkçe Kelime Oyunu",
        loading: "Yükleniyor...",
        
        // Main Menu
        play: "Oyna",
        study: "Kelime Çalış",
        progress: "İlerlemem",
        settings: "Ayarlar",
        
        // Game Modes
        selectGameMode: "Oyun Modu Seç",
        matching: "Eşleştirme",
        matchingDesc: "Kelimeleri eşleştir",
        memory: "Hafıza",
        memoryDesc: "Kartları hatırla",
        speed: "Hız Turu",
        speedDesc: "60 saniyede ne kadar kelime?",
        fill: "Boşluk Doldur",
        fillDesc: "Eksik harfleri tamamla",
        listen: "Dinle ve Seç",
        listenDesc: "Sesi dinle, doğru kelimeyi bul",
        
        // Game Screen
        back: "Geri",
        hint: "İpucu",
        sound: "Ses",
        
        // Study Screen
        wordStudy: "Kelime Çalış",
        allCategories: "Tüm Kategoriler",
        colors: "Renkler",
        numbers: "Sayılar",
        animals: "Hayvanlar",
        school: "Okul",
        family: "Aile",
        food: "Yiyecek",
        verbs: "Fiiller",
        
        // Progress Screen
        myProgress: "İlerlemem",
        totalWords: "Toplam Kelime",
        correctAnswers: "Doğru Cevaplar",
        accuracy: "Doğruluk",
        difficultWords: "Zorlandığın Kelimeler",
        achievements: "Rozetler",
        
        // Settings Screen
        accessibility: "Erişilebilirlik",
        highContrast: "Yüksek Kontrast",
        disableAnimations: "Animasyonları Kapat",
        largeText: "Büyük Yazı",
        sound: "Ses",
        enableSound: "Ses Efektleri",
        enableSpeech: "Sesli Telaffuz",
        game: "Oyun",
        hintsPerGame: "Oyun Başına İpucu",
        data: "Veri",
        resetProgress: "İlerlemeyi Sıfırla",
        exportData: "Verileri Dışa Aktar",
        
        // Game Over Modal
        gameOver: "Oyun Bitti!",
        finalScore: "Final Puanı:",
        timeSpent: "Geçen Süre:",
        playAgain: "Tekrar Oyna",
        backToMenu: "Ana Menü",
        
        // Hint Modal
        close: "Kapat",
        
        // Game Messages
        correct: "Doğru!",
        incorrect: "Yanlış!",
        tryAgain: "Tekrar dene!",
        greatJob: "Harika iş!",
        keepGoing: "Devam et!",
        timeUp: "Süre doldu!",
        gameComplete: "Oyun tamamlandı!",
        
        // Hints
        hintArticle: "Bu kelimenin artikeli:",
        hintCategory: "Bu kelime kategorisi:",
        hintFirstLetter: "İlk harf:",
        hintLastLetter: "Son harf:",
        hintLength: "Bu kelime {length} harfli",
        hintSound: "Sesi dinle ve tekrarla",
        
        // Achievements
        firstWord: "İlk Kelime",
        firstWordDesc: "İlk kelimeyi öğrendin!",
        speedster: "Hız Ustası",
        speedsterDesc: "60 saniyede 10 kelime!",
        perfectScore: "Mükemmel Skor",
        perfectScoreDesc: "Tüm soruları doğru yanıtladın!",
        wordMaster: "Kelime Ustası",
        wordMasterDesc: "100 kelime öğrendin!",
        streakMaster: "Seri Ustası",
        streakMasterDesc: "10 doğru cevap serisi!",
        dailyLearner: "Günlük Öğrenci",
        dailyLearnerDesc: "7 gün üst üste çalıştın!",
        
        // Categories
        categoryColors: "Renkler",
        categoryNumbers: "Sayılar",
        categoryAnimals: "Hayvanlar",
        categorySchool: "Okul",
        categoryFamily: "Aile",
        categoryFood: "Yiyecek",
        categoryVerbs: "Fiiller",
        
        // Errors
        errorNoSpeech: "Sesli telaffuz desteklenmiyor",
        errorNoWords: "Bu kategoride kelime bulunamadı",
        errorLoading: "Yükleme hatası",
        errorSave: "Kaydetme hatası",
        
        // Confirmations
        confirmReset: "Tüm ilerlemeni sıfırlamak istediğinden emin misin?",
        confirmExport: "Verilerini dışa aktarmak istiyor musun?",
        
        // Success Messages
        dataExported: "Veriler başarıyla dışa aktarıldı",
        progressSaved: "İlerleme kaydedildi",
        settingsSaved: "Ayarlar kaydedildi"
    },
    
    de: {
        // App Title
        appTitle: "Deutsch-Türkisch Wortspiel",
        loading: "Lädt...",
        
        // Main Menu
        play: "Spielen",
        study: "Wörter lernen",
        progress: "Mein Fortschritt",
        settings: "Einstellungen",
        
        // Game Modes
        selectGameMode: "Spielmodus wählen",
        matching: "Zuordnung",
        matchingDesc: "Wörter zuordnen",
        memory: "Gedächtnis",
        memoryDesc: "Karten merken",
        speed: "Schnellrunde",
        speedDesc: "Wie viele Wörter in 60 Sekunden?",
        fill: "Lücken füllen",
        fillDesc: "Fehlende Buchstaben ergänzen",
        listen: "Hören und wählen",
        listenDesc: "Höre zu und finde das richtige Wort",
        
        // Game Screen
        back: "Zurück",
        hint: "Tipp",
        sound: "Ton",
        
        // Study Screen
        wordStudy: "Wörter lernen",
        allCategories: "Alle Kategorien",
        colors: "Farben",
        numbers: "Zahlen",
        animals: "Tiere",
        school: "Schule",
        family: "Familie",
        food: "Essen",
        verbs: "Verben",
        
        // Progress Screen
        myProgress: "Mein Fortschritt",
        totalWords: "Gesamte Wörter",
        correctAnswers: "Richtige Antworten",
        accuracy: "Genauigkeit",
        difficultWords: "Schwierige Wörter",
        achievements: "Abzeichen",
        
        // Settings Screen
        accessibility: "Barrierefreiheit",
        highContrast: "Hoher Kontrast",
        disableAnimations: "Animationen deaktivieren",
        largeText: "Große Schrift",
        sound: "Ton",
        enableSound: "Soundeffekte",
        enableSpeech: "Sprachausgabe",
        game: "Spiel",
        hintsPerGame: "Tipps pro Spiel",
        data: "Daten",
        resetProgress: "Fortschritt zurücksetzen",
        exportData: "Daten exportieren",
        
        // Game Over Modal
        gameOver: "Spiel beendet!",
        finalScore: "Endpunktzahl:",
        timeSpent: "Verbrachte Zeit:",
        playAgain: "Nochmal spielen",
        backToMenu: "Hauptmenü",
        
        // Hint Modal
        close: "Schließen",
        
        // Game Messages
        correct: "Richtig!",
        incorrect: "Falsch!",
        tryAgain: "Versuche es nochmal!",
        greatJob: "Großartige Arbeit!",
        keepGoing: "Weiter so!",
        timeUp: "Zeit ist um!",
        gameComplete: "Spiel beendet!",
        
        // Hints
        hintArticle: "Der Artikel dieses Wortes ist:",
        hintCategory: "Diese Wortkategorie ist:",
        hintFirstLetter: "Erster Buchstabe:",
        hintLastLetter: "Letzter Buchstabe:",
        hintLength: "Dieses Wort hat {length} Buchstaben",
        hintSound: "Höre zu und wiederhole",
        
        // Achievements
        firstWord: "Erstes Wort",
        firstWordDesc: "Du hast dein erstes Wort gelernt!",
        speedster: "Geschwindigkeitsmeister",
        speedsterDesc: "10 Wörter in 60 Sekunden!",
        perfectScore: "Perfekte Punktzahl",
        perfectScoreDesc: "Alle Fragen richtig beantwortet!",
        wordMaster: "Wortmeister",
        wordMasterDesc: "100 Wörter gelernt!",
        streakMaster: "Serienmeister",
        streakMasterDesc: "10 richtige Antworten in Folge!",
        dailyLearner: "Täglicher Lerner",
        dailyLearnerDesc: "7 Tage in Folge gelernt!",
        
        // Categories
        categoryColors: "Farben",
        categoryNumbers: "Zahlen",
        categoryAnimals: "Tiere",
        categorySchool: "Schule",
        categoryFamily: "Familie",
        categoryFood: "Essen",
        categoryVerbs: "Verben",
        
        // Errors
        errorNoSpeech: "Sprachausgabe wird nicht unterstützt",
        errorNoWords: "Keine Wörter in dieser Kategorie gefunden",
        errorLoading: "Ladefehler",
        errorSave: "Speicherfehler",
        
        // Confirmations
        confirmReset: "Bist du sicher, dass du deinen gesamten Fortschritt zurücksetzen möchtest?",
        confirmExport: "Möchtest du deine Daten exportieren?",
        
        // Success Messages
        dataExported: "Daten erfolgreich exportiert",
        progressSaved: "Fortschritt gespeichert",
        settingsSaved: "Einstellungen gespeichert"
    }
};

// Current language
let currentLanguage = 'tr';

// Get translation
const t = (key, params = {}) => {
    let translation = TRANSLATIONS[currentLanguage][key] || TRANSLATIONS.tr[key] || key;
    
    // Replace parameters
    Object.keys(params).forEach(param => {
        translation = translation.replace(`{${param}}`, params[param]);
    });
    
    return translation;
};

// Set language
const setLanguage = (lang) => {
    if (TRANSLATIONS[lang]) {
        currentLanguage = lang;
        updateAllTexts();
    }
};

// Update all texts in the UI
const updateAllTexts = () => {
    const elements = document.querySelectorAll('[data-text]');
    elements.forEach(element => {
        const key = element.getAttribute('data-text');
        const text = t(key);
        if (element.tagName === 'INPUT' && element.type === 'placeholder') {
            element.placeholder = text;
        } else {
            element.textContent = text;
        }
    });
    
    // Update document title
    document.title = t('appTitle');
    
    // Update html lang attribute
    document.documentElement.lang = currentLanguage;
};

// Toggle language
const toggleLanguage = () => {
    const newLang = currentLanguage === 'tr' ? 'de' : 'tr';
    setLanguage(newLang);
    
    // Update language toggle button
    const toggleBtn = document.getElementById('language-toggle');
    if (toggleBtn) {
        const flagSpan = toggleBtn.querySelector('.flag');
        flagSpan.textContent = newLang === 'tr' ? '🇹🇷' : '🇩🇪';
    }
};

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
    module.exports = {
        TRANSLATIONS,
        t,
        setLanguage,
        updateAllTexts,
        toggleLanguage,
        currentLanguage
    };
}